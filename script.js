const playlists = [
  {
    name: "2010 mix's",
    cover: "cover/playlist1cover/playlist1.jpeg",
    covers: [
      "cover/playlist1cover/playlist1.jpeg",
      "cover/playlist1cover/EmbeddedCover.jpg",
      "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=600&q=80",
      "https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?w=600&q=80",
      "https://images.unsplash.com/photo-1506157786151-b8491531f063?w=600&q=80",
      "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=600&q=80",
      "https://images.unsplash.com/photo-1516660162077-7719aad8cbb6?w=600&q=80",
      "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600&q=80"
    ],
    songs: [
      { title: "Shape of You", artist: "Ed Sheeran", src: "songs/2010 mix's/01 Ed Sheeran - Shape of You.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "All The Stars", artist: "Kendrick Lamar", src: "songs/2010 mix's/01 Kendrick Lamar - All The Stars.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Young And Beautiful", artist: "Lana Del Rey", src: "songs/2010 mix's/01 Lana Del Rey - Young And Beautiful.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Counting Stars", artist: "OneRepublic", src: "songs/2010 mix's/01 OneRepublic - Counting Stars.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Something Just Like This", artist: "The Chainsmokers", src: "songs/2010 mix's/01 The Chainsmokers - Something Just Like This.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Cruel Summer", artist: "Taylor Swift", src: "songs/2010 mix's/02 Taylor Swift - Cruel Summer.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "See You Again", artist: "Tyler, The Creator", src: "songs/2010 mix's/04 Tyler, The Creator - See You Again.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "One Dance", artist: "Drake", src: "songs/2010 mix's/12 Drake - One Dance.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "I Love You So", artist: "The Walters", src: "songs/2010 mix's/The Walters - I Love You So.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Cascadilla", artist: "Azula", src: "songs/2010 mix's/Azula - Cascadilla.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Skylights", artist: "Blue Wednesday", src: "songs/2010 mix's/Blue Wednesday - Skylights.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Foyer", artist: "Brief   Breezy", src: "songs/2010 mix's/Brief   Breezy - Foyer.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Shape of You", artist: "Ed Sheeran", src: "songs/2010 mix's/Ed Sheeran   Shape of You.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "pleasant drive", artist: "Flower Chanel.", src: "songs/2010 mix's/Flower Chanel. - pleasant drive.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "traitor", artist: "Olivia Rodrigo", src: "songs/2010 mix's/Olivia Rodrigo   traitor.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "Cartoons   Cereal", artist: "Silva Sax", src: "songs/2010 mix's/Silva Sax - Cartoons   Cereal.mp3", art: "cover/playlist1cover/playlist1.jpeg" },
      { title: "song1", artist: "", src: "songs/2010 mix's/song1.mp3", art: "cover/playlist1cover/playlist1.jpeg" }
    ]
  },
  {
    name: "Chill Beats",
    cover: "cover/playlist2cover/EmbeddedCover.jpg",
    covers: [
      "cover/playlist2cover/EmbeddedCover.jpg",
      "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=600&q=80",
      "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=600&q=80",
      "https://images.unsplash.com/photo-1523755231516-e43fd2e8dca5?w=600&q=80",
      "https://images.unsplash.com/photo-1470225620780-46b2c3c73d40?w=600&q=80",
      "https://images.unsplash.com/photo-1511671782779-590c6a1a5b1f?w=600&q=80",
      "https://images.unsplash.com/photo-1495665494235-4f0b2b47623e?w=600&q=80"
    ],
    songs: [
      { title: "Letting Go", artist: "AVIRA", src: "songs/playlist2/AVIRA - Letting Go.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Bedroom Blues", artist: "Chewsday", src: "songs/playlist2/Chewsday - Bedroom Blues.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "loading", artist: "Faith Lofi", src: "songs/playlist2/Faith Lofi - loading.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Fresh Air", artist: "Julian", src: "songs/playlist2/Julian - Fresh Air.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Main Island", artist: "Kristoffer Eikrem", src: "songs/playlist2/Kristoffer Eikrem - Main Island.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Eclipse", artist: "Lenny Loops", src: "songs/playlist2/Lenny Loops - Eclipse.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Sunny Side Up", artist: "Meryl Street", src: "songs/playlist2/Meryl Street - Sunny Side Up.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "You Might Miss These Days", artist: "PØPE", src: "songs/playlist2/PØPE - You Might Miss These Days.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Today and Tomorrow", artist: "Softy", src: "songs/playlist2/Softy - Today and Tomorrow.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "devotion", artist: "Summer Clarke", src: "songs/playlist2/Summer Clarke - devotion.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Garden of presidents", artist: "This Is Moving", src: "songs/playlist2/This Is Moving - Garden of presidents.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "pistachios forever", artist: "uniqlesse", src: "songs/playlist2/uniqlesse - pistachios forever.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "ZenBeat", artist: "Zeitgeister", src: "songs/playlist2/Zeitgeister - ZenBeat.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Die With A Smile", artist: "Lady Gaga", src: "songs/playlist2/Lady Gaga   Die With A Smile.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Cruel Summer", artist: "Taylor Swift", src: "songs/playlist2/Taylor Swift   Cruel Summer.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" },
      { title: "Blinding Lights", artist: "The Weeknd", src: "songs/playlist2/The Weeknd   Blinding Lights.mp3", art: "cover/playlist2cover/EmbeddedCover.jpg" }
    ]
  },
  {
    name: "Lofi Beats",
    cover: "",
    covers: [
      "https://images.unsplash.com/photo-1517602302552-471fe67acf66?w=600&q=80",
      "https://images.unsplash.com/photo-1464375117522-1311d6a5b81d?w=600&q=80",
      "https://images.unsplash.com/photo-1483412033650-1015ddeb83d1?w=600&q=80",
      "https://images.unsplash.com/photo-1519750783826-e2420f4d687f?w=600&q=80",
      "https://images.unsplash.com/photo-1468818438311-4bab781ab9b8?w=600&q=80",
      "https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=600&q=80"
    ],
    songs: [
      { title: "Simmering", artist: "anton suede", src: "songs/playlist3/anton suede - Simmering.mp3", art: "" },
      { title: "Kyla", artist: "BeatsBySindri", src: "songs/playlist3/BeatsBySindri - Kyla.mp3", art: "" },
      { title: "lonely nights", artist: "Butterfli", src: "songs/playlist3/Butterfli - lonely nights.mp3", art: "" },
      { title: "little bird", artist: "chanchito estafa", src: "songs/playlist3/chanchito estafa - little bird.mp3", art: "" },
      { title: "Rearview", artist: "Dondie", src: "songs/playlist3/Dondie - Rearview.mp3", art: "" },
      { title: "Tuscany", artist: "Fya Playce", src: "songs/playlist3/Fya Playce - Tuscany.mp3", art: "" },
      { title: "Wistful", artist: "herman.", src: "songs/playlist3/herman. - Wistful.mp3", art: "" },
      { title: "eclipse", artist: "Hevi", src: "songs/playlist3/Hevi - eclipse.mp3", art: "" },
      { title: "monday coffee", artist: "Jazzamass", src: "songs/playlist3/Jazzamass - monday coffee.mp3", art: "" },
      { title: "Old Days", artist: "KiddoCalvin", src: "songs/playlist3/KiddoCalvin - Old Days.mp3", art: "" },
      { title: "Kanáan", artist: "lorleaf", src: "songs/playlist3/lorleaf - Kanáan.mp3", art: "" },
      { title: "ValleyViews", artist: "Mellow Mirror", src: "songs/playlist3/Mellow Mirror - ValleyViews.mp3", art: "" },
      { title: "Neverending", artist: "Moofushi", src: "songs/playlist3/Moofushi - Neverending.mp3", art: "" },
      { title: "Goodbye", artist: "Sabrina Carpenter", src: "songs/playlist3/Sabrina Carpenter   Goodbye.mp3", art: "" },
      { title: "Half Moon", artist: "Sleepr Cell", src: "songs/playlist3/Sleepr Cell - Half Moon.mp3", art: "" },
      { title: "Quiet", artist: "Soft Dunes", src: "songs/playlist3/Soft Dunes - Quiet.mp3", art: "" },
      { title: "should i stay", artist: "Someday", src: "songs/playlist3/Someday - should i stay.mp3", art: "" },
      { title: "Cozy Nights", artist: "Soulflu", src: "songs/playlist3/Soulflu - Cozy Nights.mp3", art: "" },
      { title: "engine", artist: "yellofish", src: "songs/playlist3/yellofish - engine.mp3", art: "" }
    ]
  }
];

/* ====== dynamic: build additional alternating playlists ====== */
(function extendPlaylists(){
  function buildAlternating(name, cover, sourceIndexes, maxCount){
    const sourceLists = sourceIndexes.map(i => (playlists[i]||{}).songs||[]);
    const maxLen = Math.min(
      maxCount || Infinity,
      sourceLists.reduce((m, arr)=> Math.max(m, arr.length), 0)
    );
    const songs = [];
    for(let i=0;i<maxLen;i++){
      for(let s=0;s<sourceLists.length;s++){
        const song = sourceLists[s][i];
        if(song){
          songs.push({
            title: song.title,
            artist: song.artist,
            src: song.src,
            art: song.art
          });
        }
      }
    }
    if(songs.length){
      const covers = [
        cover,
        "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&q=80",
        "https://images.unsplash.com/photo-1519999482648-25049ddd37b1?w=600&q=80",
        "https://images.unsplash.com/photo-1483412033650-1015ddeb83d1?w=600&q=80",
        "https://images.unsplash.com/photo-1519750783826-e2420f4d687f?w=600&q=80",
        "https://images.unsplash.com/photo-1506157786151-b8491531f063?w=600&q=80"
      ];
      playlists.push({ name, cover, covers, songs });
    }
  }
  // Mix of Chill Beats and Lofi Beats
  buildAlternating('Focus Mix', 'cover/playlist2cover/EmbeddedCover.jpg', [1,2], 16);
  // Mix of 2010 mix's and Chill Beats
  buildAlternating("Energy Shuffle", 'cover/playlist1cover/playlist1.jpeg', [0,1], 16);
})();

/* ========== DOM refs ========== */
const leftPanel = document.getElementById('leftPanel');
const rightPanel = document.getElementById('rightPanel');
const divider = document.getElementById('divider');
const playlistList = document.getElementById('playlistList');
const playlistTitle = document.getElementById('playlistTitle');
const songList = document.getElementById('songList');
const playlistHeaderArt = document.getElementById('playlistHeaderArt');
const menuToggle = document.getElementById('menuToggle');
const mobileOverlay = document.getElementById('mobileOverlay');

const audio = document.getElementById('audio');
const playBtn = document.getElementById('playBtn');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const seekBar = document.getElementById('seekBar');
const curTime = document.getElementById('curTime');
const durTime = document.getElementById('durTime');
const volumeBar = document.getElementById('volumeBar');

const playerArt = document.getElementById('player-album-art');
const playerSongTitle = document.getElementById('player-song-title');
const playerArtist = document.getElementById('player-artist');

let currentPlaylist = 0;
let currentIndex = 0;
let isPlaying = false;

/* ====== build playlists UI ====== */
function renderPlaylists(){
  playlistList.innerHTML = '';
  playlists.forEach((pl, i) => {
    const li = document.createElement('li');
    li.dataset.idx = i;
    const coverSrc = selectDistinctPlaylistCover(pl, i);
    li.innerHTML = `
      <div class="playlist-card"><img src="${coverSrc}" alt="" style="width:100%;height:100%;object-fit:cover"></div>
      <div class="playlist-meta">
        <div class="name">${pl.name}</div>
        <div class="count">${pl.songs.length} songs</div>
      </div>`;
    li.addEventListener('click', ()=> {
      currentPlaylist = i;
      currentIndex = 0;
      renderSongs(i);
      highlightActivePlaylist();
      playlistTitle.textContent = pl.name;
      if(playlistHeaderArt){ playlistHeaderArt.src = selectDistinctPlaylistCover(pl, i); }
    });
    playlistList.appendChild(li);
  });
}
function highlightActivePlaylist(){
  [...playlistList.children].forEach((c, idx)=> c.classList.toggle('active', idx==currentPlaylist));
}

/* ====== build songs UI ====== */
function renderSongs(plIndex){
  songList.innerHTML = '';
  const pl = playlists[plIndex];
  pl.songs.forEach((s, idx) => {
    const li = document.createElement('li');
    li.className = 'song-item';
    li.dataset.idx = idx;
    const artSrc = getAlternatingArt(pl, s, idx);
    li.innerHTML = `
      <div class="song-thumb"><img src="${artSrc}" style="width:100%;height:100%;object-fit:cover"></div>
      <div style="flex:1">
        <div style="font-weight:700">${s.title}</div>
        <div style="font-size:0.85rem;color:var(--muted)">${s.artist}</div>
      </div>
      <div class="song-duration" style="font-size:0.85rem;color:var(--muted)">${formatStrictDurationPlaceholder()}</div>`;
    li.addEventListener('click', ()=> {
      currentIndex = idx;
      loadSong(plIndex, idx, true);
    });
    songList.appendChild(li);
  });
  updateActiveSong();
  preloadSongDurations(plIndex);
}

/* tiny helper because remote files don't expose duration until loaded */
function formatStrictDurationPlaceholder(){ return '—:—' }

/* ====== load & play ====== */
function loadSong(plIdx, idx, autoplay=false){
  const s = playlists[plIdx].songs[idx];
  if(!s) return;
  audio.src = s.src;
  playerSongTitle.textContent = s.title;
  playerArtist.textContent = s.artist;
  playerArt.src = getAlternatingArt(playlists[plIdx], s, idx);
  updateActiveSong();
  if(autoplay){ audio.play().catch(()=>{}); }
}

/* update active listing */
function updateActiveSong(){
  [...songList.children].forEach((li, idx)=> li.classList.toggle('playing', idx==currentIndex));
}

/* ====== playback controls ====== */
playBtn.addEventListener('click', ()=>{
  if(!audio.src) {
    loadSong(currentPlaylist, currentIndex, true);
    return;
  }
  if(audio.paused){ audio.play(); } else { audio.pause(); }
});

prevBtn.addEventListener('click', ()=>{
  const pl = playlists[currentPlaylist].songs;
  currentIndex = (currentIndex - 1 + pl.length) % pl.length;
  loadSong(currentPlaylist, currentIndex, true);
});
nextBtn.addEventListener('click', ()=>{
  const pl = playlists[currentPlaylist].songs;
  currentIndex = (currentIndex + 1) % pl.length;
  loadSong(currentPlaylist, currentIndex, true);
});

/* audio event listeners */
audio.addEventListener('play', ()=> {
  isPlaying = true;
  playBtn.textContent = '⏸';
  playerArt.classList.add('rotating');
});
audio.addEventListener('pause', ()=> {
  isPlaying = false;
  playBtn.textContent = '▶';
  playerArt.classList.remove('rotating');
});
audio.addEventListener('ended', ()=> {
  nextBtn.click();
});

/* update progress & UI fill */
audio.addEventListener('timeupdate', ()=>{
  if(!audio.duration || isNaN(audio.duration)) return;
  const pct = (audio.currentTime / audio.duration) * 100;
  seekBar.value = pct;
  setRangeFill(seekBar, pct);
  curTime.textContent = formatTime(audio.currentTime);
  durTime.textContent = formatTime(audio.duration);
});

/* seek */
seekBar.addEventListener('input', ()=>{
  if(!audio.duration || isNaN(audio.duration)) return;
  audio.currentTime = (seekBar.value/100) * audio.duration;
  setRangeFill(seekBar, seekBar.value);
});

/* volume */
volumeBar.addEventListener('input', ()=>{
  audio.volume = volumeBar.value / 100;
  setRangeFill(volumeBar, volumeBar.value);
});

/* helper: set inline gradient fill for range inputs */
function setRangeFill(el, pct){
  const styles = getComputedStyle(document.documentElement);
  const accent = styles.getPropertyValue('--accent').trim() || '#ff2d55';
  const track = styles.getPropertyValue('--track').trim() || '#e5e5ea';
  el.style.background = `linear-gradient(90deg, ${accent} ${pct}%, ${track} ${pct}%)`;
}

/* format mm:ss */
function formatTime(t){
  const m = Math.floor(t/60);
  const s = Math.floor(t%60).toString().padStart(2,'0');
  return `${m}:${s}`;
}

/* cache durations to avoid repeated metadata loads */
const durationCache = {};

function preloadSongDurations(plIndex){
  const pl = playlists[plIndex];
  if(!pl) return;
  [...songList.children].forEach((li, idx)=>{
    const s = pl.songs[idx];
    if(!s) return;
    const tgt = li.querySelector('.song-duration');
    if(!tgt) return;
    if (typeof s._durationSeconds === 'number' || durationCache[s.src] !== undefined){
      const secs = typeof s._durationSeconds === 'number' ? s._durationSeconds : durationCache[s.src];
      tgt.textContent = formatTime(secs);
      return;
    }
    const temp = new Audio();
    temp.preload = 'metadata';
    temp.src = s.src;
    temp.addEventListener('loadedmetadata', ()=>{
      const secs = Math.floor(temp.duration || 0);
      if(secs > 0){
        s._durationSeconds = secs;
        durationCache[s.src] = secs;
        if(currentPlaylist === plIndex && songList.children[idx]){
          const curLi = songList.children[idx];
          const curTgt = curLi.querySelector('.song-duration');
          if(curTgt) curTgt.textContent = formatTime(secs);
        }
      }
    }, { once:true });
  });
}

/* determine alternating art for list/player */
function getAlternatingArt(playlist, song, index){
  const sources = [];
  if (song && song.art) sources.push(song.art);
  if (playlist && Array.isArray(playlist.covers)){
    for (let i=0;i<playlist.covers.length;i++){
      const c = playlist.covers[i];
      if (c && !sources.includes(c)) sources.push(c);
    }
  }
  if (playlist && playlist.cover && playlist.cover !== sources[0]) sources.push(playlist.cover);
  if (playlist && playlist.cover){
    const lastSlash = playlist.cover.lastIndexOf('/');
    if (lastSlash !== -1){
      const dir = playlist.cover.slice(0, lastSlash);
      const embedded = `${dir}/EmbeddedCover.jpg`;
      if (!sources.includes(embedded)) sources.push(embedded);
    }
  }
  if (sources.length === 0) return '';
  return sources[index % sources.length];
}

/* ensure each playlist card (and header) uses a consistent, distinct cover */
function selectDistinctPlaylistCover(playlist, idx){
  if(!playlist) return '';
  const pool = Array.isArray(playlist.covers) && playlist.covers.length ? playlist.covers.slice() : [];
  if(playlist.cover && !pool.includes(playlist.cover)) pool.push(playlist.cover);
  if(pool.length === 0) return '';
  return pool[idx % pool.length];
}

/* ====== draggable divider logic ====== */
(function setupDivider(){
  let dragging = false;
  let startX=0, startLeftWidth=0;
  // set initial widths
  leftPanel.style.width = localStorage.getItem('sw_left_width') || '30vw';
  rightPanel.style.width = localStorage.getItem('sw_right_width') || 'calc(70vw - 12px)';

  divider.addEventListener('pointerdown', (e)=>{
    dragging = true;
    startX = e.clientX;
    startLeftWidth = leftPanel.getBoundingClientRect().width;
    document.body.style.userSelect = 'none';
  });

  window.addEventListener('pointermove', (e)=>{
    if(!dragging) return;
    const dx = e.clientX - startX;
    const newLeft = Math.max(220, startLeftWidth + dx); // min width 220px
    const total = leftPanel.parentElement.getBoundingClientRect().width;
    const leftPct = (newLeft / total) * 100;
    leftPanel.style.width = `${leftPct}vw`; // set via vw-ish (approx)
    // set right to remaining minus divider
    // fallback: let right be flex auto; keep it simple
  });

  window.addEventListener('pointerup', ()=>{
    if(!dragging) return;
    dragging = false;
    document.body.style.userSelect = '';
    // persist
    localStorage.setItem('sw_left_width', leftPanel.style.width);
  });
})();

/* ====== normal init; redirect to login if unauthenticated ====== */
(function init(){
  if(localStorage.getItem('sw_demo_access') !== '1'){
    window.location.replace('login.html');
    return;
  }
  const welcome = document.getElementById('welcomeUser');
  const uid = localStorage.getItem('sw_demo_user') || '';
  if(welcome && uid){ welcome.textContent = `Welcome, ${uid}`; }
  const logout = document.getElementById('logoutBtn');
  if(logout){
    logout.addEventListener('click', ()=>{
      const ok = window.confirm('Are you sure you want to log out?');
      if(!ok) return;
      localStorage.removeItem('sw_demo_access');
      localStorage.removeItem('sw_demo_user');
      window.location.replace('login.html');
    });
  }
  renderPlaylists();
  renderSongs(0);
  highlightActivePlaylist();
  loadSong(0,0);
  if(playlistHeaderArt){ playlistHeaderArt.src = selectDistinctPlaylistCover(playlists[0], 0); }
  volumeBar.value = 50;
  setRangeFill(volumeBar, 50);
  setRangeFill(seekBar, 0);
})();

/* ====== mobile menu interactions ====== */
function openMobileMenu(){
  if(!leftPanel) return;
  leftPanel.classList.add('mobile-open');
  if(mobileOverlay){ mobileOverlay.hidden = false; }
}
function closeMobileMenu(){
  if(!leftPanel) return;
  leftPanel.classList.remove('mobile-open');
  if(mobileOverlay){ mobileOverlay.hidden = true; }
}
if(menuToggle){ menuToggle.addEventListener('click', openMobileMenu); }
if(mobileOverlay){ mobileOverlay.addEventListener('click', closeMobileMenu); }
// Close after choosing a playlist on mobile
if(playlistList){
  playlistList.addEventListener('click', ()=>{
    if(window.matchMedia && window.matchMedia('(max-width: 768px)').matches){
      closeMobileMenu();
    }
  });
}

